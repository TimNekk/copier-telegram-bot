{% if 'i18n' in features -%}
from sqlalchemy import String
{% endif -%}
from sqlalchemy.orm import Mapped{% if has_blocked_bot or 'i18n' in features %}, mapped_column{% endif %}
{%- if has_blocked_bot %}
from sqlalchemy.sql import expression
{%- endif %}

from bot.database.models.base import Base, TimestampMixin, big_int_pk, str_32{% if deep_link %}, str_64{% endif %}, str_255


class UserModel(TimestampMixin, Base):
    __tablename__ = "users"

    id: Mapped[big_int_pk]
    username: Mapped[str_32 | None]
    first_name: Mapped[str_255 | None]
    last_name: Mapped[str_255 | None]
{%- if deep_link %}
    deep_link: Mapped[str_64 | None]
{%- endif %}
{%- if has_blocked_bot %}
    has_blocked_bot: Mapped[bool] = mapped_column(server_default=expression.false())
{%- endif %}
{%- if 'i18n' in features %}
    locale: Mapped[str | None] = mapped_column(String(2))
{%- endif %}

    repr_cols = ("id", "username")
    repr_cols_num = 2
